<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.d5ef0abb16ee382cea7f.css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.13.67"/><title data-react-helmet="true"></title><link rel="shortcut icon" href="/icons/icon-48x48.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4ef553e9fe57c91ca05412e9c7fe6c29"/><link as="script" rel="preload" href="/webpack-runtime-8cff43d473446410332a.js"/><link as="script" rel="preload" href="/app-2abc712ad9efc8f7d08e.js"/><link as="script" rel="preload" href="/styles-cedea6ec0d842ae241f4.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-9319b606a19ca7fa3341.js"/><link as="fetch" rel="preload" href="/page-data/2014-03-24-commented-500-primes/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><header style="background:rebeccapurple;margin-bottom:1.45rem"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem"><h1 style="margin:0"><a style="color:white;text-decoration:none" href="/">haru-note</a></h1><div style="color:white;text-decoration:none;padding-top:1rem"><span>ì½ê³ , ì“°ê³ , ê·¸ë¦¬ê³ , ì½”ë”©í•˜ëŠ” í•˜ë£¨</span><ul style="list-style:none;display:inline;margin:0;padding:0;float:right"><li style="display:inline;margin:0;padding-left:0.5rem"><a href="https://github.com/soharu" style="color:white;text-decoration:none">github</a></li><li style="display:inline;margin:0;padding-left:0.5rem"><a href="https://www.instagram.com/soharu.day" style="color:white;text-decoration:none">instagram</a></li></ul></div></div><div style="width:100%;background-color:#f2f2f2;padding:0.5rem;text-align:center"><h4 style="margin:0"><span role="img" aria-label="construction">ğŸš§</span>ì‚¬ì´íŠ¸ ê³µì‚¬ ì¤‘</h4><p style="font-size:0.8rem;margin:0">ì¼ë¶€ ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div></header><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><main style="min-height:400px"><div><h1>500 Primes</h1><div><h3>Source Code</h3>
<pre><code class="language-armasm">% Algorithm P: Print table of 500 primes
L       IS      500                 % The number of primes to find
t       IS      $255                % Temporary storage
n       GREG    0                   % Prime candidate
q       GREG    0                   % Quotient
r       GREG    0                   % Remainder
jj      GREG    0                   % Index for PRIME[j]
kk      GREG    0                   % Index for PRIME[k]
pk      GREG    0                   % Value of PRIME[k]
mm      IS      kk                  % Index for output lines
        LOC     Data_Segment
PRIME1  WYDE    2                   % PRIME[1] = 2
        LOC     PRIME1+2*L
ptop    GREG    @                   % Address of PRIME[501]
j0      GREG    PRIME1+2-@          % Initial value of jj
BUF     OCTA    0                   % Place to form decimal string

        LOC     #100
Main    SET     n,3                 % P1. Start table. n &#x3C;- 3
        SET     jj,j0               % j &#x3C;- 1
2H      STWU    n,ptop,jj           % P2. n is prime. PRIME[j+1] &#x3C;- n
        INCL    jj,2                % j &#x3C;- j + 1
3H      BZ      jj,2F               % P3. 500 found?
4H      INCL    n,2                 % P4. Advance n
5H      SET     kk,j0               % P5. k &#x3C;- 2 / k = ptop - kk
6H      LDWU    pk,ptop,kk          % P6. n / PRIME[k] ?
        DIV     q,n,pk              % q &#x3C;- floor(n / PRIME[k])
        GET     r,rR                % r &#x3C;- n mod PRIME[k]
        BZ      r,4B                % To P4 if r = 0 for checking the next n
7H      CMP     t,q,pk              % P7. PRIME[k] large?
        BNP     t,2B                % To P4 if q &#x3C;= PRIME[k]
8H      INCL    kk,2                % P8. Advance k. k &#x3C;- k + 1
        JMP     6B                  % To P6.
        GREG    @                   % Base address
Title   BYTE    "First Five Hundred Primes"
NewLn   BYTE    #a,0
Blanks  BYTE    "   ",0             % String of three blanks
2H      LDA     t,Title             % P9. Print Title
        TRAP    0,Fputs,StdOut
        NEG     mm,2
3H      ADD     mm,mm,j0            % P10. Print line
        LDA     t,Blanks            % Output "   ".
        TRAP    0,Fputs,StdOut
2H      LDWU    pk,ptop,mm          % pk &#x3C;- prime to be printed
0H      GREG    #2030303030000000   % " 0000",0,0,0
        STOU    0B,BUF              % Prepare buffer for decimal conversion
        LDA     t,BUF+4             % t &#x3C;- position of units digit
1H      DIV     pk,pk,10            % pk &#x3C;- floor(pk/10)
        GET     r,rR                % r &#x3C;- next digit
        INCL    r,'0'               % r &#x3C;- ASCII digit r
        STBU    r,t,0               % Store r in the buffer
        SUB     t,t,1               % Move one byte to the left
        PBNZ    pk,1B               % Repeat on remaining digits
        LDA     t,BUF               % Output " " and four digits
        TRAP    0,Fputs,StdOut
        INCL    mm,2*L/10           % Advance by 50 wydes
        PBN     mm,2B
        LDA     t,NewLn             % Output a newline
        TRAP    0,Fputs,StdOut
        CMP     t,mm,2*(L/10-1)     % P11. 500 printed?
        PBNZ    t,3B                % To P10 if not done
        TRAP    0,Halt,0
</code></pre>
<h3>ì‹œì‘ì— ì•ì„œ...</h3>
<p>ì½”ë“œì˜ ê° í•„ë“œëŠ” ë‹¤ìŒì„ ì˜ë¯¸í•œë‹¤.</p>
<table>
<thead>
<tr>
<th align="left">line number</th>
<th align="left">LABEL</th>
<th align="left">OP</th>
<th align="left">EXPR</th>
<th align="left">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">02</td>
<td align="left">L</td>
<td align="left">IS</td>
<td align="left">500</td>
<td align="left">% The number of primes to find</td>
</tr>
</tbody>
</table>
<h4>Line 01</h4>
<pre><code>01 % Algorithm P: Print table of 500 primes
</code></pre>
<p>%ë¡œ ì‹œì‘í•˜ëŠ” 01ì€ ì£¼ì„ìœ¼ë¡œ ì–´ì…ˆë¸”ë¦¬ ì½”ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.</p>
<h3>ì „ì—­ ë ˆì§€ìŠ¤í„° ì„ ì–¸ê³¼ ì´ˆê¸°í™”</h3>
<h4>Line 02 ~ 03</h4>
<pre><code>02 L       IS      500             % The number of primes to find
03 t       IS      $255            % Temporary storage
</code></pre>
<blockquote>
<p>..., the pseudo-operation <code>IS</code> sets the equivalent of a symbol.</p>
</blockquote>
<p>Pseudo-operation <code>IS</code>ëŠ” ì‹¬ë³¼ì˜ ê°’ì„ ì„¤ì •í•œë‹¤.</p>
<p>02ì—ì„œ <code>L</code>ì€ 500ìœ¼ë¡œ ì„¤ì •ëœë‹¤. ì´ ê°’ì€ ìš°ë¦¬ê°€ ì°¾ì„ ì†Œìˆ˜ì˜ ê°¯ìˆ˜ì´ë‹¤.
03ì—ì„œ <code>t</code>ì˜ ê°’ì€ $255 ë ˆì§€ìŠ¤í„°ì´ë‹¤.</p>
<p>ì‹¬ë³¼ë“¤ì€ $0 ~ $255 ë²”ìœ„ì˜ ë ˆì§€ìŠ¤í„° ê°’ì„ ê°–ê±°ë‚˜, 8ë°”ì´íŠ¸ì˜ ìˆ«ìê°’ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</p>
<p>ì¼ë°˜ì ìœ¼ë¡œ ë ˆì§€ìŠ¤í„°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì‹¬ë³¼ì€ ì†Œë¬¸ìë¡œ ì‹œì‘í•˜ê³ , ìˆœìˆ˜í•œ ê°’ì„ ë‚˜íƒœë‚´ëŠ” ì‹¬ë³¼ì€ ëŒ€ë¬¸ìë¥¼ ì‚¬ìš©í•œë‹¤.</p>
<h4>Line 04 ~ 09</h4>
<pre><code>04 n       GREG    0               % Prime candidate
05 q       GREG    0               % Quotient
06 r       GREG    0               % Remainder
07 jj      GREG    0               % Index for PRIME[j]
08 kk      GREG    0               % Index for PRIME[k]
09 pk      GREG    0               % Value of PRIME[k]
</code></pre>
<blockquote>
<p>The pseudo-op <code>GREG</code> on line 04 allocates a global register.</p>
</blockquote>
<p>Pseudo-operation <code>GREG</code>ëŠ” ì „ì—­ ë ˆì§€ìŠ¤í„°ë¥¼ í• ë‹¹í•œë‹¤.</p>
<p>$255 ë ˆì§€ìŠ¤í„°ëŠ” í•­ìƒ ì „ì—­ ë ˆì§€ìŠ¤í„°ì´ë‹¤.</p>
<p>04ì˜ <code>GREG</code>ëŠ” $254ë¥¼ ì „ì—­ ë ˆì§€ìŠ¤í„°ë¡œ ë§Œë“ ë‹¤. 05ë„ ë§ˆì°¬ê°€ì§€ë¡œ $253ì— ëŒ€í•´ì„œ ê·¸ëŸ¬í•˜ë‹¤. ë”°ë¼ì„œ 04ì—ì„œ 09ê¹Œì§€ ì´ 6ê°œì˜ ì „ì—­ ë ˆì§€ìŠ¤í„°ê°€ í• ë‹¹ëœë‹¤. ê·¸ë¦¬ê³  n, q, r, jj, kk, pkëŠ” ê° ë ˆì§€ìŠ¤í„°ì™€ ë™ì¼í•˜ë‹¤.</p>
<table>
<thead>
<tr>
<th align="center">Symbol</th>
<th align="center">Global Register</th>
<th align="center">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">n</td>
<td align="center">$254</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">q</td>
<td align="center">$253</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">r</td>
<td align="center">$252</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">jj</td>
<td align="center">$251</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">kk</td>
<td align="center">$250</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">pk</td>
<td align="center">$249</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p><code>GREG</code> ì •ì˜ì˜ EXPR í•„ë“œê°€  <strong>0</strong>ì´ë©´, í•´ë‹¹ ì „ì—­ ë ˆì§€ìŠ¤í„°ëŠ” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ê°’ì„ ê°–ëŠ”ë‹¤ê³  ê°€ì •í•œë‹¤.</p>
<p>14, 15, 34, 45ì™€ ê°™ì´ 0ì´ ì•„ë‹Œ ì‹ì´ ì£¼ì–´ì§€ë©´, í•´ë‹¹ ì „ì—­ ë ˆì§€ìŠ¤í„°ëŠ” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ìƒìˆ˜ê°’ì„ ê°–ëŠ”ë‹¤.</p>
<h4>Line 10</h4>
<pre><code>10 mm      IS      kk              % Index for output lines
</code></pre>
<p>08ì¤„ì— ë”°ë¼ mmì€ $250ì™€ ë™ì¼í•˜ë‹¤.</p>
<h4>Line 11</h4>
<pre><code>11         LOC     Data_Segment
</code></pre>
<blockquote>
<p><code>Location LOC Expression</code> : Continue to assemble instructions or data at the position in memory given by Expression. Often used Expressions are: #100 (where programs start) or Data_Segment. -- MMIX Quick Reference Card "Assembler Directives"</p>
</blockquote>
<p>Pseudo-operation <code>LOC</code>ëŠ” <code>EXPR</code>ì— ì˜í•´ ì£¼ì–´ì§„ <strong>ë©”ëª¨ë¦¬ì˜ ìœ„ì¹˜</strong>ì—ì„œ ì–´ì…ˆë¸”ë¦¬ ëª…ë ¹ ë˜ëŠ” ë°ì´í„°ê°€ ê³„ì†ë¨ì„ ì˜ë¯¸í•œë‹¤.</p>
<p>Data_SegmentëŠ” MMIXALì—ì„œ í¸ì˜ìƒ #2000 0000 0000 0000 (ë³´ê¸° í¸ì˜ìƒ 4ìë¦¬ ë§ˆë‹¤ ê³µë°± ë¬¸ìë¥¼ ë„£ì—ˆìŒ. ì‹¤ì œë¡œëŠ” ë¶™ì—¬ì¨ì•¼ í•¨)ë¡œ ë¯¸ë¦¬ ì •ì˜ë˜ì–´ ìˆë‹¤.</p>
<h4>Line 12</h4>
<pre><code>12 PRIME1  WYDE    2               % PRIME[1] = 2
</code></pre>
<p><code>WYDE</code>ëŠ” 2ë°”ì´íŠ¸ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  <code>EXPR</code>ì˜ ê²°ê³¼ë¡œ ë¡œ ì´ˆê¸°í™” í•œë‹¤. ê·¸ë¦¬ê³  <code>LABEL</code>ì€ í• ë‹¹ëœ ì£¼ì†Œì˜ ì´ë¦„ì´ ëœë‹¤. ê·¸ë¦¬í•˜ì•¼ <code>Data_Segment</code> ì˜ì—­ì— ì†Œìˆ˜ë¥¼ ì €ì¥í•  ê³µê°„ì˜ ì‹œì‘ ì£¼ì†Œì— <code>PRIME1</code> ì´ë¼ëŠ” ì´ë¦„ì´ ë¶™ì—ˆê³ , ê±°ê¸°ì— ì²«ë²ˆì§¸ ì†Œìˆ˜ì¸ 2ê°€ ì €ì¥ë˜ì—ˆë‹¤.</p>
<h4>Line 13 ~ Line 15</h4>
<pre><code>13         LOC     PRIME1+2*L
14 ptop    GREG    @               % Address of PRIME[501]
15 j0      GREG    PRIME1+2-@      % Initial value of jj
</code></pre>
<p>ì „ì—­ ë ˆì§€ìŠ¤í„° ptopì— PRIME1ìœ¼ë¡œ ë¶€í„° 1000 bytes ë–¨ì–´ì§„ ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œë¥¼ ì €ì¥í•œë‹¤.</p>
<p>ê·¸ë¦¬ê³  ì „ì—­ ë ˆì§€ìŠ¤í„° ptop, j0ì— ì•„ë˜ì™€ ê°™ì€ ê°’ì´ ì´ˆê¸°í™” ëœë‹¤.</p>
<table>
<thead>
<tr>
<th align="center">Symbol</th>
<th align="center">Global Register</th>
<th align="center">Value</th>
<th align="left"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">ptop</td>
<td align="center">$248</td>
<td align="center">#20000000000003e8</td>
<td align="left">PRIME1+1000</td>
</tr>
<tr>
<td align="center">j0</td>
<td align="center">$247</td>
<td align="center">-998</td>
<td align="left">PRIME1+2-(PRIME1+1000)</td>
</tr>
</tbody>
</table>
<h4>Line 16</h4>
<pre><code>16 BUF     OCTA    0               % Place to form decimal string
</code></pre>
<p>ì´ í›„ ê²°ê³¼ ì¶œë ¥ì„ ìœ„í•´ ì‹­ì§„ìˆ˜ ìˆ«ìë¥¼ ì €ì¥í•  ë¬¸ìì—´ ë²„í¼ë¡œ ë©”ëª¨ë¦¬ì— 8 byteë¥¼ í• ë‹¹í•˜ê³  0ìœ¼ë¡œ ì´ˆê¸°í™” í•œë‹¤. ê·¸ë¦¬ê³  ê·¸ ì£¼ì†Œì˜ ì´ë¦„ì€ <code>BUF</code>.</p>
<h3>ì†Œìˆ˜ êµ¬í•˜ê¸°</h3>
<h4>Line 18</h4>
<pre><code>18         LOC     #100
</code></pre>
<p>user space address #0000 0000 0000 0100ì— ì•„ë˜ ì½”ë“œê°€ ìœ„ì¹˜í•œë‹¤.</p>
<h4>Line 19 ~ 20</h4>
<pre><code>19 Main    SET     n,3             % P1. Start table. n &#x3C;- 3
20         SET     jj,j0           % j &#x3C;- 1
</code></pre>
<table>
<thead>
<tr>
<th align="center">Symbol</th>
<th align="center">Global Register</th>
<th align="center">Previous Value</th>
<th align="center">Current Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">n</td>
<td align="center">$254</td>
<td align="center">0</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">jj</td>
<td align="center">$251</td>
<td align="center">0</td>
<td align="center">-998</td>
</tr>
<tr>
<td align="center">j0</td>
<td align="center">$247</td>
<td align="center">-998</td>
<td align="center">-998</td>
</tr>
</tbody>
</table>
<h4>Line 21 ~ 33</h4>
<p>ì†Œìˆ˜ë¥¼ ì°¾ëŠ” ë£¨í”„ ë¶€ë¶„.</p>
<pre><code>21 2H      STWU    n,ptop,jj       % P2. n is prime. PRIME[j+1] &#x3C;- n
22         INCL    jj,2            % j &#x3C;- j + 1
23 3H      BZ      jj,2F           % P3. 500 found?
24 4H      INCL    n,2             % P4. Advance n
25 5H      SET     kk,j0           % P5. k &#x3C;- 2 / k = ptop + kk
26 6H      LDWU    pk,ptop,kk      % P6. n / PRIME[k] ?
27         DIV     q,n,pk          %       q &#x3C;- floor(n / PRIME[k])
28         GET     r,rR            %       r &#x3C;- n mod PRIME[k]
29         BZ      r,4B            % To P4 if r = 0 for checking the next n
30 7H      CMP     t,q,pk          % P7. PRIME[k] large?
31         BNP     t,2B            % To P4 if q &#x3C;= PRIME[k]
32 8H      INCL    kk,2            % P8. Advance k. k &#x3C;- k + 1
33         JMP     6B              % To P6.
</code></pre>
<p>21ë²ˆ ì¤„ì—ì„œëŠ” n = 3ì´ê³ , 3ì´ ì†Œìˆ˜ì´ë¯€ë¡œ nì„ PRIME[ptop + jj]ì— ì €ì¥í•œë‹¤. ë’¤ì˜ 31ë²ˆ ì¤„ì—ì„œ ì†Œìˆ˜ë¥¼ ì°¾ì•˜ì„ ë•Œ 2Hë¡œ ë¸Œëœì¹˜í•˜ì—¬ nì„ ì €ì¥í•œë‹¤.</p>
<p>22ë²ˆ ì¤„ì—ì„œëŠ” jjë¥¼ 2ë§Œí¼ ì¦ê°€ì‹œì¼œ ë‹¤ìŒ ì†Œìˆ˜ê°€ ì €ì¥ë  ìœ„ì¹˜ì— ëŒ€í•œ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤.</p>
<p>23ë²ˆ ì¤„ì—ì„œëŠ” jjê°€ 0ì´ë˜ë©´ 500ê°œì˜ ì†Œìˆ˜ê°€ ëª¨ë‘ êµ¬í•´ì§„ ê²ƒìœ¼ë¡œ ì´ ê²½ìš°ì—ëŠ” "2 Forward"ë¡œ 2H ë¼ë²¨ì´ ë¶™ì€ 44ì¤„ë¡œ ì´ë™í•œë‹¤.</p>
<p>24ë²ˆ ì¤„ì—ì„œëŠ” í™€ìˆ˜ë§Œ ê²€ì‚¬í•˜ê¸° ìœ„í•´ nì„ 2ì”© ì¦ê°€ ì‹œí‚¨ë‹¤.</p>
<p>25ë²ˆ ì¤„ì—ì„œëŠ” nì´ í˜„ì¬ê¹Œì§€ ì°¾ì€ ì†Œìˆ˜ë¡œ ë‚˜ëˆ ì§€ëŠ”ì§€ ê²€ì‚¬í•˜ê¸° ìœ„í•´ ë‚˜ëˆ ë³¼ ì†Œìˆ˜ì— ëŒ€í•œ ì¸ë±ìŠ¤ë¡œ kkë¥¼ ì‚¬ìš©í•œë‹¤. k = ptop + kk. nì€ í™€ìˆ˜ì´ë¯€ë¡œ ptopì— ìˆëŠ” 2ë¡œëŠ” ë‚˜ëˆ ë³¼ í•„ìš”ê°€ ì—†ê¸°  ë•Œë¬¸ì— kkë¥¼ j0ë¡œ ì„¤ì •í•œë‹¤.</p>
<p>26ë²ˆ ì¤„ì—ì„œëŠ” ë©”ëª¨ë¦¬ì— ìˆëŠ” kë²ˆì§¸ ì†Œìˆ˜ë¥¼ ë¡œë“œí•œë‹¤. pk = M[ptop + kk] ê°’ì´ ì„¤ì •ëœë‹¤.</p>
<p>27ë²ˆ ì¤„ì—ì„œ nì„ pkë¡œ ë‚˜ëˆˆ ëª«ì„ qì— ì €ì¥í•œë‹¤.</p>
<p>28ë²ˆ ì¤„ì—ì„œëŠ” ë ˆì§€ìŠ¤í„° r(g#252)ë¡œ rR(remainder register)ì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.</p>
<p>29ë²ˆ ì¤„ì—ì„œëŠ” rì´ 0ì¸ì§€ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ”ë°, rì´ 0ì´ë¼ëŠ” ê²ƒì€ nì´ ì†Œìˆ˜ë¡œ ë‚˜ëˆ ì§„ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ë¯€ë¡œ nì€ ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤. ë•Œë¬¸ì— ë‹¤ìŒ ì†Œìˆ˜ë¥¼ ê²€ì‚¬í•˜ê¸° ìœ„í•´ "4 backward" í•˜ì—¬ 24ë²ˆ ì¤„ë¡œ ì´ë™í•œë‹¤.</p>
<p>30ë²ˆ ì¤„ì—ì„œëŠ” qì™€ pkì˜ ê°’ì„ ë¹„êµí•˜ëŠ”ë° ë§Œì•½ q &#x3C;= pk ì´ë©´ nì€ ì†Œìˆ˜ì´ë‹¤. ì´ì— ëŒ€í•œ ì¦ëª…ì€ ì—°ìŠµë¬¸ì œ 11ë²ˆì„ ì°¸ê³ .</p>
<p>31ë²ˆ ì¤„ì—ì„œëŠ” q&#x3C;= pkì¸ ê²½ìš° t &#x3C;= 0ì´ ë˜ë¯€ë¡œ nì€ ì†Œìˆ˜ë¡œ íŒì •ë˜ê³  nì„ ì €ì¥í•˜ê¸° ìœ„í•´ "2 backward"ì¸ 21ë²ˆ ì¤„ì˜ 2H ë¼ë²¨ë¡œ ì´ë™í•œë‹¤.</p>
<p>32ë²ˆ ì¤„ì—ì„œëŠ” nì´ ì†Œìˆ˜ì¸ì§€ ì•„ì§ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ  ë‹¤ìŒ ì†Œìˆ˜ë¡œ ë‚˜ëˆ ë³´ê¸° ìœ„í•´ì„œ kkë¥¼ 2ë§Œí¼ ì¦ê°€ì‹œí‚¨ë‹¤.</p>
<p>33ë²ˆ ì¤„ì—ì„œëŠ” pk[ptop + kk]ë¡œ nì„ ë‚˜ëˆ ë³´ê¸° ìœ„í•´ì„œ "6 backward"ì¸ 26ë²ˆ ì¤„ì˜ 6H ë¼ë²¨ë¡œ ì´ë™í•œë‹¤.</p>
<h3>í…Œì´ë¸” ì¶œë ¥</h3>
<p>ê²°ê³¼ê°€ ì¶œë ¥ë˜ëŠ” í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<pre><code>First Five Hundred Primes
First Five Hundred Primes
    0002 0233 0547 0877 1229 1597 1993 2371 2749 3187
    0003 0239 0557 0881 1231 1601 1997 2377 2753 3191
    0005 0241 0563 0883 1237 1607 1999 2381 2767 3203
    ...
    0229 0541 0863 1223 1583 1987 2357 2741 3181 3571
</code></pre>
<h4>Line 34 ~ 37</h4>
<pre><code>34         GREG    @               % Base address
35 Title   BYTE    "First Five Hundred Primes"
36 NewLn   BYTE    #a,0
37 Blanks  BYTE    "   ",0         % String of three blanks
</code></pre>
<p>ë©”ëª¨ë¦¬ì— ì¶œë ¥ì— í•„ìš”í•œ ë¬¸ìì—´ë“¤ì„ ìœ„í•œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  ì´ˆê¸°í™”í•œë‹¤.</p>
<h4>Line 38 ~ 39</h4>
<pre><code>38 2H      LDA     t,Title         % P9. Print Title
39         TRAP    0,Fputs,StdOut
</code></pre>
<p>íƒ€ì´í‹€ì„ ì¶œë ¥í•œë‹¤.</p>
<h4>Line 40 ~ 61</h4>
<pre><code>40         NEG     mm,2            % Initialize m.
41 3H      ADD     mm,mm,j0        % P10. Print line
42         LDA     t,Blanks        % Output "   ".
43         TRAP    0,Fputs,StdOut
44 2H      LDWU    pk,ptop,mm      % pk &#x3C;- prime to be printed
45 0H      GREG    #2030303030000000       % " 0000",0,0,0
46         STOU    0B,BUF          % Prepare buffer for decimal conversion
47         LDA     t,BUF+4         % t &#x3C;- position of units digit
48 1H      DIV     pk,pk,10        % pk &#x3C;- floor(pk/10)
49         GET     r,rR            % r &#x3C;- next digit
50         INCL    r,'0'           % r &#x3C;- ASCII digit r
51         STBU    r,t,0           % Store r in the buffer
52         SUB     t,t,1           % Move one byte to the left
53         PBNZ    pk,1B           % Repeat on remaining digits
54         LDA     t,BUF           % Output " " and four digits
55         TRAP    0,Fputs,StdOut
56         INCL    mm,2*L/10       % Advance by 50 wydes
57         PBN     mm,2B
58         LDA     t,NewLn         % Output a newline
59         TRAP    0,Fputs,StdOut
60         CMP     t,mm,2*(L/10-1) % P11. 500 printed?
61         PBNZ    t,3B            % To P10 if not done
</code></pre>
<p>40ë²ˆ ì¤„ì—ì„œëŠ” mm(g#250)ì„ -2ë¡œ ì„¤ì •.</p>
<p>41ë²ˆ ì¤„ì—ì„œëŠ” mm = mm + j0ë¡œ ì„¤ì •</p>
<p>42ë²ˆ ~ 43ë²ˆ ì¤„ì—ì„œëŠ” ì¶œë ¥ ë¼ì¸ì˜ ì²« ì‹œì‘ì¸ ê³µë°±ë¬¸ì 3ê°œë¥¼ ì¶œë ¥í•œë‹¤.</p>
<p>44ë²ˆ ì¤„ì—ì„œëŠ” ì¶œë ¥í•  ì†Œìˆ˜ë¥¼ pkë¡œ ê°€ì ¸ì˜¨ë‹¤. pkëŠ” PRIMES[ptop + mm].</p>
<p>45ë²ˆ ì¤„ì—ì„œëŠ” ìˆ«ìë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ë¬¸ìì—´ì„ ìœ„í•œ ì „ì—­ ë ˆì§€ìŠ¤í„°ë¥¼ í• ë‹¹í•œë‹¤.</p>
<p>46ë²ˆ ì¤„ì—ì„œëŠ” 45ë²ˆì— ì„ ì–¸í•œ ë¬¸ìì—´ì„ BUFì— ì €ì¥í•œë‹¤.</p>
<p>47ë²ˆ ì¤„ì—ì„œëŠ” tê°€ BUF + 4ì˜ ìœ„ì¹˜ë¥¼ ê°€ë¦¬í‚¤ë„ë¡ í•œë‹¤.</p>
<pre><code>" 0000"
     ^
     t
</code></pre>
<p>48ë²ˆ ì¤„ì—ì„œëŠ” pkë¥¼ 10ìœ¼ë¡œ ë‚˜ëˆˆ ëª«ì„ pkì— ì €ì¥í•œë‹¤.</p>
<p>49ë²ˆ ì¤„ì—ì„œëŠ” pkì˜ ë‚˜ë¨¸ì§€(digit)ê°€ ì €ì¥ëœ rRì˜ ê°’ì„ rë¡œ ê°€ì ¸ì˜¨ë‹¤.</p>
<p>50ë²ˆ ì¤„ì—ì„œëŠ” digitë¥¼ charë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ rì— ë¬¸ì '0'ì„ ë”í•´ì¤€ë‹¤.</p>
<p>51ë²ˆ ì¤„ì—ì„œëŠ” ì´ë ‡ê²Œ ë³€í™˜ëœ digitì„ ë²„í¼ì— ì €ì¥í•œë‹¤.</p>
<p>52ë²ˆ ì¤„ì—ì„œëŠ” tì—ì„œ 1ì„ ë¹¼ì„œ ì•ì˜ ìë¦¿ìˆ˜ë¡œ ì´ë™ì‹œí‚¨ë‹¤.</p>
<pre><code>" 0002"
    ^
    t
</code></pre>
<p>53ë²ˆ ì¤„ì—ì„œëŠ” pkì´ê°€ 0ì´ ì•„ë‹Œ ê²½ìš°, ì¶œë ¥í•  ìë¦¿ìˆ˜ê°€ ë” ë‚¨ì•˜ë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ "1 backward"ì¸ 48ë²ˆì¤„ì˜ 1H ë¼ë²¨ë¡œ ì´ë™í•œë‹¤.</p>
<p>54~55ë²ˆ ì¤„ì—ì„œëŠ” BUFì— ì €ì¥ëœ ì†Œìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤.</p>
<p>56ë²ˆ ì¤„ì—ì„œëŠ” ë‹¤ìŒì— ì¶œë ¥í•  ì†Œìˆ˜ì˜ ìœ„ì¹˜ë¥¼ ê³„ì‚°í•˜ëŠ”ë° ì†Œìˆ˜ í…Œì´ë¸”ì´ rowê°€ 50ê³ , columnì´ 10ì´ë¼, í˜„ì¬ ìˆ«ìì—ì„œ ë‹¤ìŒ 50ë²ˆì§¸ ìˆ«ìë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•´ mmì„ 2 * L / 10 ë§Œí¼ ì¦ê°€ ì‹œí‚¨ë‹¤.</p>
<p>57ë²ˆ ì¤„ì—ì„œ mmì´ ìŒìˆ˜ë©´ í˜„ì¬ ì¤„ì— ì¶œë ¥í•œ ì†Œìˆ˜ê°€ ë‚¨ì•˜ë‹¤ëŠ” ì˜ë¯¸ë¡œ "2 backward"ì¸ 44ë²ˆì¤„ë¡œì˜ 2H ë¼ë²¨ë¡œ ì´ë™í•œë‹¤.</p>
<p>58~59ë²ˆ ì¤„ì€ 10ê°œì˜ ì†Œìˆ˜ë¥¼ ë‹¤ ì¶œë ¥í•˜ê³  ë‚œ í›„, ê°œí–‰ë¬¸ìë¥¼ ì¶œë ¥í•´ì¤€ë‹¤.</p>
<p>60ë²ˆ ì¤„ì—ì„œëŠ” mmì´ ë§ˆì§€ë§‰ ì†Œìˆ˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” ìœ„ì¹˜ì¸ì§€ ê²€ì‚¬í•œë‹¤.</p>
<p>61ë²ˆ ì¤„ì—ì„œëŠ” mmê³¼ ë§ˆì§€ë§‰ ì†Œìˆ˜ì˜ ìœ„ì¹˜ê°€ë¥¼ ë¹„êµí•œ ê²½ê³¼ê°€ ê°™ì§€ ì•Šì€ ê²½ìš°(0ì´ ì•„ë‹Œ ê²½ìš°), "3 backward"ì¸ 41ë²ˆ ì¤„ì˜ 3H ë¼ë²¨ë¡œ ì´ë™í•œë‹¤.</p>
<p>mmì˜ ê°’ì˜ ë³€í™”ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<table>
<thead>
<tr>
<th align="center">Line</th>
<th align="right">c00</th>
<th align="right">c01</th>
<th align="right">c02</th>
<th align="right">c03</th>
<th align="right">c04</th>
<th align="right">c05</th>
<th align="right">c06</th>
<th align="right">c07</th>
<th align="right">c08</th>
<th align="right">c09</th>
<th align="right">-</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td align="right">-1000</td>
<td align="right">-900</td>
<td align="right">-800</td>
<td align="right">-700</td>
<td align="right">-600</td>
<td align="right">-500</td>
<td align="right">-400</td>
<td align="right">-300</td>
<td align="right">-200</td>
<td align="right">-100</td>
<td align="right">0</td>
</tr>
<tr>
<td align="center">2</td>
<td align="right">-998</td>
<td align="right">-898</td>
<td align="right">-798</td>
<td align="right">-698</td>
<td align="right">-598</td>
<td align="right">-498</td>
<td align="right">-398</td>
<td align="right">-298</td>
<td align="right">-198</td>
<td align="right">-98</td>
<td align="right">2</td>
</tr>
<tr>
<td align="center">3</td>
<td align="right">-996</td>
<td align="right">-896</td>
<td align="right">-796</td>
<td align="right">-696</td>
<td align="right">-596</td>
<td align="right">-496</td>
<td align="right">-396</td>
<td align="right">-296</td>
<td align="right">-196</td>
<td align="right">-96</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<h3>í”„ë¡œê·¸ë¨ ì¢…ë£Œ</h3>
<h4>Line 62</h4>
<pre><code>62         TRAP    0,Halt,0
</code></pre>
<p>í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•œë‹¤.</p></div></div></main></div><footer style="border-top:1px solid #EFEAF4;padding-top:0.5rem;padding-bottom:1rem;text-align:center;font-size:0.8rem">Â© 2014-<!-- -->2019<!-- --> <b>Jahyun Oh</b>. All rights reserved. Built with<!-- --> <b><a href="https://www.gatsbyjs.org" style="color:rebeccapurple;text-decoration:none">Gatsby</a></b></footer></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2014-03-24-commented-500-primes/";window.webpackCompilationHash="97a0bab495729999bd62";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-2abc712ad9efc8f7d08e.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-9319b606a19ca7fa3341.js"],"component---src-pages-404-js":["/component---src-pages-404-js-eb5297a14a3a6029c0d4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ac67c01f041aa42b8e37.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-82109d67f7cd2335a66e.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-9319b606a19ca7fa3341.js" async=""></script><script src="/styles-cedea6ec0d842ae241f4.js" async=""></script><script src="/app-2abc712ad9efc8f7d08e.js" async=""></script><script src="/webpack-runtime-8cff43d473446410332a.js" async=""></script></body></html>